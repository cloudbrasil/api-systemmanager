const _ = require('lodash');
const expect = require('chai').expect;

const API = require('../../index');

let session;
let userId;
let retData;

const avatar = 'data:image/png;base64,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';
const type = 'image/png';
const login = {username: 'ana.breda', password: '123456'};

describe('Start API user', function () {
  before(function (done) {

    try {
      sm = new API();
      done();
    } catch (ex) {
      expect(ex).to.be.empty;
    }
  });

  describe('Avatar', function () {
    it('Login User', async function () {
      try {
        retData = await sm.login.userPass(login);

        expect(retData).to.not.be.empty;
        expect(retData.auth).to.be.true;
        expect(retData.user).to.be.an('object');
        expect(retData.user).to.be.an('object');
        expect(retData.user).to.not.be.empty;
        expect(retData.user.sessionId).to.not.be.empty;
        expect(retData.user.sessionId.split('.').length).equal(3);
        expect(retData.user.orgId.length).equal(24);

        session = retData.user.sessionId;
        userId = retData.user._id;
      } catch (ex) {
        expect(ex).to.be.empty;
      }
    });

    it('Update avatar', async function () {
      try {
        const setParams = {avatar, type};
        retData = await sm.user.user.updateAvatar(setParams, session);

        expect(retData).to.not.be.empty;
        expect(retData).to.be.an('object');
        expect(retData).to.include.all.keys('_id', 'orgId', 'name', 'avatar');
        expect(retData.name).to.equal('Ana Breda');
        expect(retData.username).to.equal('ana.breda');
      } catch (ex) {
        expect(ex).to.be.empty;
      }
    });

    it('Remove avatar', async function () {
      try {
        retData = await sm.user.user.removeAvatar(session);

        expect(retData).to.not.be.empty;
        expect(retData).to.be.an('object');
        expect(retData).to.include.all.keys('_id', 'orgId', 'name', 'avatar');
        expect(retData.name).to.equal('Ana Breda');
        expect(retData.username).to.equal('ana.breda');
      } catch (ex) {
        expect(ex).to.be.empty;
      }
    });

    it('Logout user', async function () {
      try {
        retData = await sm.login.logout(session);

        expect(retData).to.not.be.empty;
        expect(retData).to.be.an('object');
        expect(retData.response).to.not.be.empty;
        expect(retData.response).equal('OK');
      } catch (ex) {
        expect(ex).to.be.empty;
      }
    });
  });
});
